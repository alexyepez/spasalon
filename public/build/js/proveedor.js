function iniciarApp(){iniciarProveedores(),iniciarInventario()}function iniciarProveedores(){const e=document.querySelector("#form-editar-proveedor"),r=document.querySelector("#btn-cerrar-modal-proveedor"),t=document.querySelector("#modal-proveedor"),o=document.querySelectorAll(".editar-proveedor"),a=document.querySelectorAll(".eliminar-proveedor");o&&o.forEach((e=>{e.addEventListener("click",(function(){const e=this.dataset.id,r=this.dataset.nombre,o=this.dataset.contacto,a=this.dataset.telefono,n=this.dataset.email,i=this.dataset.direccion;document.querySelector("#edit-proveedor-id").value=e,document.querySelector("#edit-nombre").value=r,document.querySelector("#edit-contacto").value=o,document.querySelector("#edit-telefono").value=a||"",document.querySelector("#edit-email").value=n||"",document.querySelector("#edit-direccion").value=i||"",t.style.display="block"}))})),a&&a.forEach((e=>{e.addEventListener("click",(function(){eliminarProveedor(this.dataset.id)}))})),r&&r.addEventListener("click",(()=>{t.style.display="none",e.reset()})),e&&e.addEventListener("submit",(async r=>{r.preventDefault();const o=new FormData(e);try{const e=await fetch("/admin/actualizar-proveedor",{method:"POST",body:o}),r=await e.json();r.resultado?(t.style.display="none",mostrarAlerta("Proveedor actualizado exitosamente","exito",".contenedor-alertas"),setTimeout((()=>location.reload()),2e3)):mostrarAlerta(r.mensaje||"Error al actualizar el proveedor","error",".contenedor-alertas")}catch(e){console.error("Error:",e),mostrarAlerta("Error al actualizar el proveedor","error",".contenedor-alertas")}}))}function iniciarInventario(){const e=document.querySelector("#form-editar-inventario"),r=document.querySelector("#btn-cerrar-modal-inventario"),t=document.querySelector("#modal-inventario"),o=document.querySelectorAll(".editar-inventario"),a=document.querySelectorAll(".eliminar-inventario");o&&o.forEach((e=>{e.addEventListener("click",(function(){const e=this.dataset.id,r=this.dataset.producto,o=this.dataset.descripcion,a=this.dataset.precio,n=this.dataset.cantidad,i=this.dataset.proveedorId,d=this.dataset.fechaIngreso;document.querySelector("#edit-inventario-id").value=e,document.querySelector("#edit-producto").value=r,document.querySelector("#edit-descripcion").value=o,document.querySelector("#edit-precio").value=a,document.querySelector("#edit-cantidad").value=n,document.querySelector("#edit-proveedor_id").value=i,document.querySelector("#edit-fecha_ingreso").value=d,t.style.display="block"}))})),a&&a.forEach((e=>{e.addEventListener("click",(function(){eliminarInventario(this.dataset.id)}))})),r&&r.addEventListener("click",(()=>{t.style.display="none",e.reset()})),e&&e.addEventListener("submit",(async r=>{r.preventDefault();const o=new FormData(e);try{const e=await fetch("/admin/actualizar-inventario",{method:"POST",body:o}),r=await e.json();r.resultado?(t.style.display="none",mostrarAlerta("Producto actualizado exitosamente","exito",".contenedor-alertas"),setTimeout((()=>location.reload()),2e3)):mostrarAlerta(r.mensaje||"Error al actualizar el producto","error",".contenedor-alertas")}catch(e){console.error("Error:",e),mostrarAlerta("Error al actualizar el producto","error",".contenedor-alertas")}}))}function eliminarProveedor(e){confirm("¿Estás seguro de eliminar este proveedor?")&&fetch("/admin/eliminar-proveedor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then((e=>e.json())).then((e=>{e.resultado?(mostrarAlerta("Proveedor eliminado exitosamente","exito",".contenedor-alertas"),setTimeout((()=>location.reload()),2e3)):mostrarAlerta(e.mensaje||"Error al eliminar el proveedor","error",".contenedor-alertas")})).catch((e=>{console.error("Error:",e),mostrarAlerta("Error al eliminar el proveedor","error",".contenedor-alertas")}))}function eliminarInventario(e){confirm("¿Estás seguro de eliminar este producto del inventario?")&&fetch("/admin/eliminar-inventario",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then((e=>e.json())).then((e=>{e.resultado?(mostrarAlerta("Producto eliminado exitosamente","exito",".contenedor-alertas"),setTimeout((()=>location.reload()),2e3)):mostrarAlerta(e.mensaje||"Error al eliminar el producto","error",".contenedor-alertas")})).catch((e=>{console.error("Error:",e),mostrarAlerta("Error al eliminar el producto","error",".contenedor-alertas")}))}function mostrarAlerta(e,r,t){const o=document.querySelector(`${t} .alerta`);o&&o.remove();const a=document.createElement("DIV");a.classList.add("alerta",r),a.textContent=e,document.querySelector(t).appendChild(a),setTimeout((()=>{a.remove()}),3e3)}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));